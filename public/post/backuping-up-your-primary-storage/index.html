

<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>Backing Up the Primary Storage - </title>

  <meta name="description" content="Last month, I was playing around with configuration files of my OS (ubuntu) and got myself into a login-loop, in simple words I couldn&rsquo;t login into my OS anymore."><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Blog Post",
    
    "url": "http:\/\/localhost:1313\/blog\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "http:\/\/localhost:1313\/blog\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "http:\/\/localhost:1313\/blog\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "http:\/\/localhost:1313\/blog\/post\/backuping-up-your-primary-storage\/",
          "name": "Backing up the primary storage"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : ""
  },
  "headline": "Backing Up the Primary Storage",
  "description" : "Last month, I was playing around with configuration files of my OS (ubuntu) and got myself into a login-loop, in simple words I couldn\u0026rsquo;t login into my OS anymore.\n",
  "inLanguage" : "en",
  "wordCount":  597 ,
  "datePublished" : "2024-04-08T01:32:36\u002b05:00",
  "dateModified" : "2024-04-08T01:32:36\u002b05:00",
  "image" : "http:\/\/localhost:1313\/blog\/",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "http:\/\/localhost:1313\/blog\/post\/backuping-up-your-primary-storage\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "http:\/\/localhost:1313\/blog\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "http:\/\/localhost:1313\/blog\/",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>


<meta property="og:title" content="Backing Up the Primary Storage" />
<meta property="og:description" content="Last month, I was playing around with configuration files of my OS (ubuntu) and got myself into a login-loop, in simple words I couldn&rsquo;t login into my OS anymore.">
<meta property="og:url" content="http://localhost:1313/blog/post/backuping-up-your-primary-storage/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Blog Post" />

  <meta name="twitter:title" content="Backing Up the Primary Storage" />
  <meta name="twitter:description" content="Last month, I was playing around with configuration files of my OS (ubuntu) and got myself into a login-loop, in simple words I couldn&rsquo;t login into my OS anymore.">
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="generator" content="Hugo 0.140.2">
  <link rel="alternate" href="http://localhost:1313/blog/index.xml" type="application/rss+xml" title="Blog Post"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css" integrity="sha384-h/hnnw1Bi4nbpD6kE7nYfCXzovi622sY5WBxww8ARKwpdLj5kUWjRuyiXaD1U2JT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="http://localhost:1313/blog/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="http://localhost:1313/blog/css/syntax.css" /><link rel="stylesheet" href="http://localhost:1313/blog/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://localhost:1313/blog/">Blog Post</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/blog/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Portfolio" href="https://qa5imm.github.io">Portfolio</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Backing Up the Primary Storage</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 8, 2024
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p>Last month, I was playing around with configuration files of my OS (ubuntu) and got myself into a login-loop, in simple words I couldn&rsquo;t login into my OS anymore.</p>
<p>I tried almost every possible solution on the internet but couldn&rsquo;t fix it, so I replaced the OS with a new one and lost all my data.</p>
<p>After that I decided to backup my SSD (primary storage) data into HDD (secondary storage). In the following, I will show you how one can go about it</p>
<p>If the secondary storage is not mounted then we have to mount it first, we can get list of the all block devices attached to the machine by using <code>lsblk</code>. In my case, HDD is <code>sda</code></p>
<p><img src="lsblk.png" alt="lsblk-output"></p>
<p>We can now mount the hdd using <code>mount</code>, mounting is making storage device&rsquo;s file system accessible to OS and users. We will first create the mounting point (endpoint in the primary file system where storage device will be mounted) using <code>mkdir</code>. Then we will mount the hdd inside the created directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir /media/qasim
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo mount /dev/sda  /media/qasim
</span></span></code></pre></div><p>Now comes the main part, we will use <code>rsync</code> for backuping the data from home directory to the hdd. <code>new volume</code> is the name of mounted device. <em>Don&rsquo;t forget to add <code>/</code> at the end of source and destination</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rsync -ra <span style="color:#e6db74">&#34;/home/qasim/&#34;</span> <span style="color:#e6db74">&#34;/media/qasim/new volume/backup/&#34;</span>
</span></span></code></pre></div><p>This command will create a backup of all the contents inside the <code>/home/qasim</code> to <code>/media/qasim/new volume/backup</code>, <code>r</code> stands for recursive, it means all the directories along with their subdirectories and files will be included. <code>a</code> tell rsync to do the incremental backup, so let&rsquo;s say that we backuped the entire ssd and now added a new file in source dir, should it should backup the whole thing again? that&rsquo;s where <code>a</code> comes in, it only backups the difference in the source and destination dir.</p>
<p>There are some other flags that we can use, i.e. <code>z</code>, it will compress the data while transferring from source to destination but it will be stored in uncompressed form in destination, it helps in speeding up the transfer. <code>v</code> stands for verbose, it instructs the program to provide more detailed output during its execution, in our case it will output the files which are accessed, bytes transferred, transfer rate etc. However, in our case as the number of files will be large so it&rsquo;s better to not use it. Right now our command looks like this</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rsync -raz <span style="color:#e6db74">&#34;/home/qasim/&#34;</span> <span style="color:#e6db74">&#34;/media/qasim/new volume/backup&#34;</span>
</span></span></code></pre></div><p>There&rsquo;s one more thing we should add, the <code>delete</code> flag. It tells rsync to delete all the files in the destination dir if they&rsquo;re not present (removed after previous backup) in the source dir.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rsync -raz --delete <span style="color:#e6db74">&#34;/home/qasim/&#34;</span> <span style="color:#e6db74">&#34;/media/qasim/new volume/backup&#34;</span>
</span></span></code></pre></div><p>To check whether the backup was success ful or not, we can use the following <code>if else</code> statments, <code>$?</code> stores the exist status of last excuted commnad , <code>-eq</code> is used for equality. Exist status of a program is zero if it&rsquo;s executed successfully else it&rsquo;s non-zero. We can put everything into a single bash file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#backup.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>rsync -raz --delete <span style="color:#e6db74">&#34;/home/qasim/&#34;</span> <span style="color:#e6db74">&#34;/media/qasim/new volume/backup&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $? -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>   echo <span style="color:#e6db74">&#34;backup successful&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>  echo <span style="color:#e6db74">&#34;backup unsuccessful&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p>Last part is to scheduled the backup periodically, for this we will use the <code>cron</code> scheduler. Open crone tab using the command <code>crontab -e</code> and provide the schedule and file you want to run. Line below will run the backup.sh file each day at 2 am.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span> * * * /home/qasim/backup.sh
</span></span></code></pre></div><p>Finally, we&rsquo;re done with incrementaly backuping up our primary storage and now we can freely meddle with config files.</p>

        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="http://localhost:1313/blog/post/harnessing-the-power-of-bash-script/" data-toggle="tooltip" data-placement="top" title="Harnessing the Power of Bash Script">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="http://localhost:1313/blog/post/encodings-in-computing/" data-toggle="tooltip" data-placement="top" title="Encodings in computing">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      

    </div>
  </div>
</div>

      <footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2025
          

          
            &nbsp;&bull;&nbsp;
            <a href="http://localhost:1313/blog/">Blog Post</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.140.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="http://localhost:1313/blog/js/main.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="http://localhost:1313/blog/js/load-photoswipe.js"></script>










    
  </body>
</html>

